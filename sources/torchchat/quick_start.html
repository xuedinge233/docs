

<!DOCTYPE html>
<html class="writer-html5" lang="zh-CN" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>快速开始 &mdash; 昇腾开源  文档</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../../_static/custom.css?v=ec38875e" />

  
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=7d86a446"></script>
      <script src="../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../../_static/copybutton.js?v=f281be69"></script>
      <script src="../../_static/package_info.js?v=2b3ed588"></script>
      <script src="../../_static/statistics.js?v=ed8c2343"></script>
      <script src="../../_static/translations.js?v=beaddf03"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="索引" href="../../genindex.html" />
    <link rel="search" title="搜索" href="../../search.html" />
    <link rel="next" title="TorchTitan" href="../torchtitan/index.html" />
    <link rel="prev" title="安装指南" href="install.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            昇腾开源
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="搜索文档" aria-label="搜索文档" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="导航菜单">
              <p class="caption" role="heading"><span class="caption-text">开始使用</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../ascend/quick_install.html">快速安装昇腾环境</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">原生支持的AI项目</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../pytorch/index.html">PyTorch</a></li>
<li class="toctree-l1"><a class="reference internal" href="../llamafactory/index.html">LLaMA-Factory</a></li>
<li class="toctree-l1"><a class="reference internal" href="../accelerate/index.html">Accelerate</a></li>
<li class="toctree-l1"><a class="reference internal" href="../transformers/index.html">Transformers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deepspeed/index.html">DeepSpeed</a></li>
<li class="toctree-l1"><a class="reference internal" href="../onnxruntime/index.html">ONNX Runtime</a></li>
<li class="toctree-l1"><a class="reference internal" href="../open_clip/index.html">open_clip</a></li>
<li class="toctree-l1"><a class="reference internal" href="../timm/index.html">timm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Diffusers/index.html">Diffusers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../opencv/index.html">OpenCV</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sd_webui/index.html">Stable-Diffusion-WebUI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../lm_evaluation/index.html">LM-Evalution-Harness</a></li>
<li class="toctree-l1"><a class="reference internal" href="../wenet/index.html">WeNet</a></li>
<li class="toctree-l1"><a class="reference internal" href="../whisper_cpp/index.html">Whisper.cpp</a></li>
<li class="toctree-l1"><a class="reference internal" href="../llama_cpp/index.html">Llama.cpp</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sentence_transformers/index.html">Sentence Transformers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../trl/index.html">Transformer Reinforcement Learning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../opencompass/index.html">OpenCompass</a></li>
<li class="toctree-l1"><a class="reference internal" href="../lm_deploy/index.html">LMDeploy</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Torchchat</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="install.html">安装指南</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">快速开始</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id2">查看帮助</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id3">下载模型</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id5">模型推理</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../torchtitan/index.html">TorchTitan</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="移动版导航菜单" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">昇腾开源</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="页面导航">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Torchchat</a></li>
      <li class="breadcrumb-item active">快速开始</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/sources/torchchat/quick_start.rst.txt" rel="nofollow"> 查看页面源码</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="id1">
<h1>快速开始<a class="headerlink" href="#id1" title="Link to this heading"></a></h1>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>阅读本篇前，请确保已按照 <a class="reference internal" href="install.html"><span class="doc">安装教程</span></a> 准备好昇腾环境及 torchchat ！</p>
<p>本篇教程将介绍如何使用 torchchat 进行快速开发，帮助您快速上手 torchchat。</p>
</div>
<section id="id2">
<h2>查看帮助<a class="headerlink" href="#id2" title="Link to this heading"></a></h2>
<p>torchchat 提供了帮助命令，帮助用户快速了解 torchchat 的使用方法。</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="c1"># 查看帮助</span>
<span class="linenos">2</span>python<span class="w"> </span>torchchat.py<span class="w"> </span>--help
</pre></div>
</div>
<p>输出列表:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span>usage:<span class="w"> </span>torchchat<span class="w"> </span><span class="o">[</span>-h<span class="o">]</span><span class="w"> </span><span class="o">{</span>chat,browser,generate,export,eval,download,list,remove,where,server<span class="o">}</span><span class="w"> </span>...
<span class="linenos"> 2</span>
<span class="linenos"> 3</span>positional<span class="w"> </span>arguments:
<span class="linenos"> 4</span><span class="w">  </span><span class="o">{</span>chat,browser,generate,export,eval,download,list,remove,where,server<span class="o">}</span>
<span class="linenos"> 5</span><span class="w">                        </span>The<span class="w"> </span>specific<span class="w"> </span><span class="nb">command</span><span class="w"> </span>to<span class="w"> </span>run
<span class="linenos"> 6</span><span class="w">    </span>chat<span class="w">                </span>Chat<span class="w"> </span>interactively<span class="w"> </span>with<span class="w"> </span>a<span class="w"> </span>model<span class="w"> </span>via<span class="w"> </span>the<span class="w"> </span>CLI
<span class="linenos"> 7</span><span class="w">    </span>generate<span class="w">            </span>Generate<span class="w"> </span>responses<span class="w"> </span>from<span class="w"> </span>a<span class="w"> </span>model<span class="w"> </span>given<span class="w"> </span>a<span class="w"> </span>prompt
<span class="linenos"> 8</span><span class="w">    </span>browser<span class="w">             </span>Chat<span class="w"> </span>interactively<span class="w"> </span>with<span class="w"> </span>a<span class="w"> </span>model<span class="w"> </span><span class="k">in</span><span class="w"> </span>a<span class="w"> </span>locally<span class="w"> </span>hosted<span class="w"> </span>browser
<span class="linenos"> 9</span><span class="w">    </span><span class="nb">export</span><span class="w">              </span>Export<span class="w"> </span>a<span class="w"> </span>model<span class="w"> </span>artifact<span class="w"> </span>to<span class="w"> </span>AOT<span class="w"> </span>Inductor<span class="w"> </span>or<span class="w"> </span>ExecuTorch
<span class="linenos">10</span><span class="w">    </span>download<span class="w">            </span>Download<span class="w"> </span>model<span class="w"> </span>artifacts
<span class="linenos">11</span><span class="w">    </span>list<span class="w">                </span>List<span class="w"> </span>all<span class="w"> </span>supported<span class="w"> </span>models
<span class="linenos">12</span><span class="w">    </span>remove<span class="w">              </span>Remove<span class="w"> </span>downloaded<span class="w"> </span>model<span class="w"> </span>artifacts
<span class="linenos">13</span><span class="w">    </span>where<span class="w">               </span>Return<span class="w"> </span>directory<span class="w"> </span>containing<span class="w"> </span>downloaded<span class="w"> </span>model<span class="w"> </span>artifacts
<span class="linenos">14</span><span class="w">    </span>server<span class="w">              </span><span class="o">[</span>WIP<span class="o">]</span><span class="w"> </span>Starts<span class="w"> </span>a<span class="w"> </span>locally<span class="w"> </span>hosted<span class="w"> </span>REST<span class="w"> </span>server<span class="w"> </span><span class="k">for</span><span class="w"> </span>model<span class="w"> </span>interaction
<span class="linenos">15</span><span class="w">    </span><span class="nb">eval</span><span class="w">                </span>Evaluate<span class="w"> </span>a<span class="w"> </span>model<span class="w"> </span>via<span class="w"> </span>lm-eval
<span class="linenos">16</span>
<span class="linenos">17</span>options:
<span class="linenos">18</span><span class="w">  </span>-h,<span class="w"> </span>--help<span class="w">            </span>show<span class="w"> </span>this<span class="w"> </span><span class="nb">help</span><span class="w"> </span>message<span class="w"> </span>and<span class="w"> </span><span class="nb">exit</span>
</pre></div>
</div>
<p>主要命令:</p>
<dl class="simple">
<dt>Inference (chat, generate, browser)</dt><dd><ul class="simple">
<li><p>chat: 交互式聊天</p></li>
<li><p>generate: 生成响应</p></li>
<li><p>browser: 在本地浏览器中交互式聊天</p></li>
</ul>
</dd>
<dt>Inventory Management (download, list, remove, where)</dt><dd><ul class="simple">
<li><p>download: 下载模型</p></li>
<li><p>list: 列出所有支持的模型</p></li>
<li><p>remove: 删除下载的模型</p></li>
<li><p>where: 返回包含下载的模型的目录</p></li>
</ul>
</dd>
</dl>
</section>
<section id="id3">
<h2>下载模型<a class="headerlink" href="#id3" title="Link to this heading"></a></h2>
<p>torchchat 大多数模型使用 Hugging Face 作为分发渠道，因此需要创建一个 Hugging Face 帐户。
按照 <a class="reference external" href="https://huggingface.co/docs/hub/en/security-tokens">此处</a> 的说明使用write角色创建 Hugging Face 用户访问令牌。</p>
<p>登录 huggingface:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="c1"># 登录 huggingface</span>
<span class="linenos">2</span>huggingface-cli<span class="w"> </span>login
</pre></div>
</div>
<p>查看支持模型列表:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="c1"># 查看支持的模型列表</span>
<span class="linenos">2</span>python<span class="w"> </span>torchchat.py<span class="w"> </span>list
</pre></div>
</div>
<p>下载模型:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="c1"># 下载模型</span>
<span class="linenos">2</span>python<span class="w"> </span>torchchat.py<span class="w"> </span>download<span class="w"> </span>&lt;model_name&gt;
<span class="linenos">3</span>
<span class="linenos">4</span><span class="c1"># 例如下载 LLaMA 模型</span>
<span class="linenos">5</span>python<span class="w"> </span>torchchat.py<span class="w"> </span>download<span class="w"> </span>llama3.1
</pre></div>
</div>
</section>
<section id="id5">
<h2>模型推理<a class="headerlink" href="#id5" title="Link to this heading"></a></h2>
<p>torchchat 支持多种推理方式，用户可以根据自己的需求选择合适的推理方式。</p>
<p>Chat
以互动方式与模型进行聊天:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="c1"># 交互式聊天</span>
<span class="linenos">2</span>python<span class="w"> </span>torchchat.py<span class="w"> </span>chat<span class="w"> </span>llama3.1
</pre></div>
</div>
<p>Generate
根据输入提示生成文本:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="c1"># 生成响应</span>
<span class="linenos">2</span>python<span class="w"> </span>torchchat.py<span class="w"> </span>generate<span class="w"> </span>llama3.1<span class="w"> </span>--prompt<span class="w"> </span><span class="s2">&quot;write me a story about a boy and his bear&quot;</span>
</pre></div>
</div>
<p>生成结果示例:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span>Using<span class="w"> </span><span class="nv">device</span><span class="o">=</span>npu<span class="w"> </span>Ascend910B3
<span class="linenos"> 2</span>Loading<span class="w"> </span>model...
<span class="linenos"> 3</span>Time<span class="w"> </span>to<span class="w"> </span>load<span class="w"> </span>model:<span class="w"> </span><span class="m">4</span>.42<span class="w"> </span>seconds
<span class="linenos"> 4</span>-----------------------------------------------------------
<span class="linenos"> 5</span>write<span class="w"> </span>me<span class="w"> </span>a<span class="w"> </span>story<span class="w"> </span>about<span class="w"> </span>a<span class="w"> </span>boy<span class="w"> </span>and<span class="w"> </span>his<span class="w"> </span>bear<span class="w"> </span>friend
<span class="linenos"> 6</span>Once<span class="w"> </span>upon<span class="w"> </span>a<span class="w"> </span>time,<span class="w"> </span><span class="k">in</span><span class="w"> </span>a<span class="w"> </span>dense<span class="w"> </span>forest,<span class="w"> </span>there<span class="w"> </span>lived<span class="w"> </span>a<span class="w"> </span>young<span class="w"> </span>boy<span class="w"> </span>named<span class="w"> </span>Timmy.<span class="w"> </span>Timmy<span class="w"> </span>was<span class="w"> </span>a<span class="w"> </span>curious<span class="w"> </span>and<span class="w"> </span>adventurous<span class="w"> </span>boy<span class="w"> </span>who<span class="w"> </span>loved<span class="w"> </span>exploring<span class="w"> </span>the<span class="w"> </span>woods<span class="w"> </span>behind<span class="w"> </span>his<span class="w"> </span>village.<span class="w"> </span>One<span class="w"> </span>day,<span class="w"> </span><span class="k">while</span><span class="w"> </span>wandering<span class="w"> </span>deeper<span class="w"> </span>into<span class="w"> </span>the<span class="w"> </span>forest<span class="w"> </span>than<span class="w"> </span>he<span class="w"> </span>had<span class="w"> </span>ever<span class="w"> </span>gone<span class="w"> </span>before,<span class="w"> </span>Timmy<span class="w"> </span>stumbled<span class="w"> </span>upon<span class="w"> </span>a<span class="w"> </span>magnificent<span class="w"> </span>brown<span class="w"> </span>bear.<span class="w"> </span>The<span class="w"> </span>bear<span class="w"> </span>was<span class="w"> </span>enormous,<span class="w"> </span>with<span class="w"> </span>a<span class="w"> </span>thick<span class="w"> </span>coat<span class="w"> </span>of<span class="w"> </span>fur<span class="w"> </span>and<span class="w"> </span>piercing<span class="w"> </span>yellow<span class="w"> </span>eyes.<span class="w"> </span>At<span class="w"> </span>first,<span class="w"> </span>Timmy<span class="w"> </span>was<span class="w"> </span>frightened,<span class="w"> </span>but<span class="w"> </span>to<span class="w"> </span>his<span class="w"> </span>surprise,<span class="w"> </span>the<span class="w"> </span>bear<span class="w"> </span>didn<span class="s1">&#39;t seem to be threatening him. Instead, the bear gently approached Timmy and began to sniff him.</span>
<span class="linenos"> 7</span>
<span class="linenos"> 8</span><span class="s1">As the days passed, Timmy and the bear, whom he named Boris, became inseparable friends. Boris was unlike any bear Timmy had ever seen before. He was incredibly intelligent and could understand human language. Boris would often sit by Timmy&#39;</span>s<span class="w"> </span>side<span class="w"> </span>as<span class="w"> </span>he<span class="w"> </span><span class="nb">read</span><span class="w"> </span>books<span class="w"> </span>or<span class="w"> </span>helped<span class="w"> </span>with<span class="w"> </span>his<span class="w"> </span>chores.<span class="w"> </span>The<span class="w"> </span>villagers<span class="w"> </span>were<span class="w"> </span>initially<span class="w"> </span>wary<span class="w"> </span>of<span class="w"> </span>Boris,<span class="w"> </span>but<span class="w"> </span>as<span class="w"> </span>they<span class="w"> </span>saw<span class="w"> </span>how<span class="w"> </span>kind<span class="w"> </span>and<span class="w"> </span>gentle<span class="w"> </span>he<span class="w"> </span>was,<span class="w"> </span>they<span class="w"> </span>grew
<span class="linenos"> 9</span>~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
<span class="linenos">10</span>Generated<span class="w"> </span><span class="m">199</span><span class="w"> </span>tokens
<span class="linenos">11</span>Time<span class="w"> </span><span class="k">for</span><span class="w"> </span>inference<span class="w"> </span><span class="m">1</span>:<span class="w"> </span><span class="m">13</span>.3118<span class="w"> </span>sec<span class="w"> </span>total
<span class="linenos">12</span>Time<span class="w"> </span>to<span class="w"> </span>first<span class="w"> </span>token:<span class="w"> </span><span class="m">0</span>.6189<span class="w"> </span>sec<span class="w"> </span>with<span class="w"> </span>parallel<span class="w"> </span>prefill.
<span class="linenos">13</span>
<span class="linenos">14</span><span class="w">    </span>Total<span class="w"> </span>throughput:<span class="w"> </span><span class="m">15</span>.0242<span class="w"> </span>tokens/sec,<span class="w"> </span><span class="m">0</span>.0666<span class="w"> </span>s/token
<span class="linenos">15</span>First<span class="w"> </span>token<span class="w"> </span>throughput:<span class="w"> </span><span class="m">1</span>.6157<span class="w"> </span>tokens/sec,<span class="w"> </span><span class="m">0</span>.6189<span class="w"> </span>s/token
<span class="linenos">16</span>Next<span class="w"> </span>token<span class="w"> </span>throughput:<span class="w"> </span><span class="m">15</span>.6781<span class="w"> </span>tokens/sec,<span class="w"> </span><span class="m">0</span>.0638<span class="w"> </span>s/token
<span class="linenos">17</span>
<span class="linenos">18</span>Bandwidth<span class="w"> </span>achieved:<span class="w"> </span><span class="m">241</span>.30<span class="w"> </span>GB/s
<span class="linenos">19</span>***<span class="w"> </span>This<span class="w"> </span>first<span class="w"> </span>iteration<span class="w"> </span>will<span class="w"> </span>include<span class="w"> </span>cold<span class="w"> </span>start<span class="w"> </span>effects<span class="w"> </span><span class="k">for</span><span class="w"> </span>dynamic<span class="w"> </span>import,<span class="w"> </span>hardware<span class="w"> </span>caches.<span class="w"> </span>***
<span class="linenos">20</span>
<span class="linenos">21</span><span class="o">========================================</span>
<span class="linenos">22</span>
<span class="linenos">23</span>
<span class="linenos">24</span>Warning:<span class="w"> </span>Excluding<span class="w"> </span>compile<span class="w"> </span><span class="k">in</span><span class="w"> </span>calculations
<span class="linenos">25</span><span class="w">    </span>Average<span class="w"> </span>tokens/sec<span class="w"> </span><span class="o">(</span>total<span class="o">)</span>:<span class="w"> </span><span class="m">15</span>.02
<span class="linenos">26</span>Average<span class="w"> </span>tokens/sec<span class="w"> </span><span class="o">(</span>first<span class="w"> </span>token<span class="o">)</span>:<span class="w"> </span><span class="m">1</span>.62
<span class="linenos">27</span>Average<span class="w"> </span>tokens/sec<span class="w"> </span><span class="o">(</span>next<span class="w"> </span>tokens<span class="o">)</span>:<span class="w"> </span><span class="m">15</span>.68
<span class="linenos">28</span>
<span class="linenos">29</span>Memory<span class="w"> </span>used:<span class="w"> </span><span class="m">17</span>.23<span class="w"> </span>GB
</pre></div>
</div>
<p>如上所示，torchchat 会对输入的文本进行处理，并生成相应的文本，同时输出生成的文本长度、推理时间、带宽等信息，方便用户进行性能分析。</p>
<blockquote>
<div><p>以上是 torchchat 的快速开始教程，更多其他昇腾原生支持功能请参考 <a class="reference internal" href="../../index.html"><span class="doc">昇腾开源</span></a> 。</p>
</div></blockquote>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="页脚">
        <a href="install.html" class="btn btn-neutral float-left" title="安装指南" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> 上一页</a>
        <a href="../torchtitan/index.html" class="btn btn-neutral float-right" title="TorchTitan" accesskey="n" rel="next">下一页 <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; 版权所有 2024, Ascend。</p>
  </div>

  利用 <a href="https://www.sphinx-doc.org/">Sphinx</a> 构建，使用的 
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">主题</a>
    由 <a href="https://readthedocs.org">Read the Docs</a> 开发.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>